{% extends "base.html" %}

{% block title %}-post list{% endblock title %}

{% block content %}
    {% if messages %}
      {% for message in messages %}
        <!-- <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert"> -->
        <li>{{message}}</li>
      {% endfor %}
    {% endif %}
    <h2>Liste des publications</h2>
    <a href="{% url 'create_post' %}">Ajouter un publication</a>
    {% for post in posts  %}
        <div>
            <p>{{post.content}}</p>
            {% if post.post_media.all %}
              {% for image in post.post_media.all  %}
                <img src="{{image.image.url}}" alt="" srcset="">
              {% endfor %}
            {% endif %}
            <p>{{post.owner}}</p>
            <p><a href="{% url 'update_post' post.id %}">Modifier une publication</a></p>
            {% if post.post_comment.all %}
              {% for comment in post.post_comment.all %}
                <li>{{comment}} <span><a href="{% url 'update_comment' post.id comment.id %}">Edit</a></span></li>
              {% endfor %}
            {% endif %}
            <p><a href="{% url 'add_comment' post.id %}">Ajouter un commentaire</a></p>
        </div>

        {% if not forloop.last %}
          <hr>
        {% endif %}
    {% endfor %}
{% endblock content %}
  
